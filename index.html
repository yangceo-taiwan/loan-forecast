<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å®åœ‹åœ°æ”¿ | æ˜“ä¸åœ°æ”¿ - å°ˆæ¥­æˆ¿è²¸è©•ä¼°ç³»çµ± v5.0</title>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --nexus-navy: #0F2E46;
            --nexus-gold: #C5A065;
            --line-green: #06C755;
        }
        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: #f8fafc; 
            color: #333;
            -webkit-tap-highlight-color: transparent;
        }

        /* 1. å“ç‰Œé ­éƒ¨ */
        .brand-header {
            background: linear-gradient(180deg, var(--nexus-navy) 0%, #162a3b 100%);
            color: white;
            padding-bottom: 2.5rem;
            border-bottom: 4px solid var(--nexus-gold);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        /* 2. æŒ‰éˆ•å„ªåŒ– */
        .btn-link {
            display: flex; align-items: center; justify-content: center;
            padding: 0.8rem; border-radius: 0.8rem;
            font-weight: bold; text-decoration: none;
            transition: all 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-link:active { transform: scale(0.98); }
        
        .btn-line { 
            background-color: var(--line-green); color: white; 
            box-shadow: 0 4px 15px rgba(6, 199, 85, 0.3);
            animation: pulse-green 2s infinite;
        }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(6, 199, 85, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(6, 199, 85, 0); }
            100% { box-shadow: 0 0 0 0 rgba(6, 199, 85, 0); }
        }

        .btn-fb { background-color: #1877F2; color: white; }
        .btn-map { background-color: #EA4335; color: white; }
        .btn-vip { 
            background: linear-gradient(90deg, #333 0%, #000 100%); 
            color: #FFD700; border: 1px solid #FFD700;
        }

        /* 3. å¡ç‰‡èˆ‡è¼¸å…¥æ¡† */
        .pro-card {
            background: white; border-radius: 1rem; padding: 1.5rem;
            margin-bottom: 1.5rem; border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .card-header {
            font-size: 1.1rem; font-weight: 700; color: var(--nexus-navy);
            margin-bottom: 1rem; padding-bottom: 0.5rem;
            border-bottom: 2px solid #f1f5f9; display: flex; align-items: center;
        }
        .card-header i { color: var(--nexus-gold); margin-right: 0.5rem; }

        .input-group { margin-bottom: 1rem; }
        .input-label { display: block; font-size: 0.9rem; color: #475569; margin-bottom: 0.4rem; font-weight: 600; }
        .nexus-input, .nexus-select {
            width: 100%; padding: 0.7rem; border-radius: 0.6rem;
            border: 1px solid #cbd5e1; background: #fff;
            font-size: 1rem; color: #1e293b; transition: all 0.2s;
        }
        .nexus-input:focus, .nexus-select:focus {
            outline: none; border-color: var(--nexus-navy);
            box-shadow: 0 0 0 3px rgba(15, 46, 70, 0.1);
        }
        .unit { position: absolute; right: 1rem; top: 2rem; color: #94a3b8; font-size: 0.9rem; pointer-events: none; }

        /* 4. çµæœé¡¯ç¤º */
        .res-box { text-align: center; padding: 1rem; border-radius: 0.8rem; height: 100%; }
        .res-box.safe { background: #ecfdf5; border: 1px solid #6ee7b7; color: #047857; }
        .res-box.limit { background: #fff1f2; border: 1px solid #fda4af; color: #be123c; }
        .res-val { font-size: 1.8rem; font-weight: 800; font-family: 'Roboto', sans-serif; }
        .res-unit { font-size: 0.9rem; font-weight: 600; }

        /* åœ–ç‰‡æ”¶åˆ */
        details.img-toggle { margin-top: 1rem; border: 1px dashed #cbd5e1; border-radius: 0.5rem; overflow: hidden; }
        details.img-toggle summary { 
            padding: 0.8rem; background: #f8fafc; cursor: pointer; font-size: 0.9rem; font-weight: 600; color: #64748b;
            display: flex; justify-content: space-between; align-items: center; transition: background 0.2s;
        }
        details.img-toggle summary:hover { background: #f1f5f9; }
        details.img-toggle img { width: 100%; display: block; border-top: 1px solid #e2e8f0; }

        /* QA æŠ˜ç–Š */
        details.qa-item > summary { list-style: none; cursor: pointer; background: #f8fafc; padding: 1rem; border-radius: 0.5rem; font-weight: 600; margin-bottom: 0.5rem; }
        details.qa-item[open] > summary { background: #e0f2fe; color: var(--nexus-navy); }
        .qa-content { padding: 1rem; background: #fff; border: 1px solid #f1f5f9; margin-bottom: 1rem; font-size: 0.95rem; line-height: 1.6; color: #4b5563; }
        
        .sticky-footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; padding: 1rem;
            box-shadow: 0 -4px 10px rgba(0,0,0,0.05); z-index: 50;
        }

        /* è² å‚µè¨»è¨˜å€å¡Š */
        .debt-notes {
            background-color: #fef2f2; border-left: 4px solid #ef4444;
            padding: 12px; margin-top: 8px; border-radius: 4px;
            font-size: 0.85rem; color: #7f1d1d;
        }
        .debt-notes ul { margin: 5px 0 0 15px; list-style-type: disc; }
        .debt-notes li { margin-bottom: 2px; }

        /* ä¿äººè¨ˆç®— */
        .g-split { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .g-card { padding: 12px; border-radius: 8px; text-align: center; border-width: 1px; }
        .g-card.perfect { background: #f0fdf4; border-color: #bbf7d0; }
        .g-card.extreme { background: #fff7ed; border-color: #fed7aa; }
        .g-title { font-size: 0.8rem; font-weight: bold; margin-bottom: 4px; display: block; }
        .g-val { font-size: 1.5rem; font-weight: 800; }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto min-h-screen pb-24 relative">

    <div class="brand-header px-6 pt-10 pb-20 rounded-b-[2.5rem]">
        <div class="text-center mb-6">
            <h1 class="text-2xl font-bold tracking-widest text-[#C5A065] mb-1">å®åœ‹åœ°æ”¿ | æ˜“ä¸åœ°æ”¿</h1>
            <p class="text-xs text-blue-100 opacity-70 tracking-[0.2em] uppercase">Professional Real Estate Evaluation</p>
        </div>
        
        <div class="grid grid-cols-4 gap-3">
            <a href="https://line.me/R/ti/p/@604gpqef" target="_blank" class="col-span-4 btn-link btn-line text-lg py-3">
                <i class="fab fa-line text-2xl mr-2"></i> åŠ å…¥å®˜æ–¹å¥½å‹ (è«®è©¢)
            </a>
            <a href="https://www.facebook.com/062582589a/" target="_blank" class="col-span-2 btn-link btn-fb text-xs">
                <i class="fab fa-facebook mr-1"></i> FB ç²‰çµ²å°ˆé 
            </a>
            <a href="https://maps.app.goo.gl/qyKhdrKsG5QBo2BW8" target="_blank" class="col-span-2 btn-link btn-map text-xs">
                <i class="fas fa-map-marker-alt mr-1"></i> åœ°åœ–å°èˆª
            </a>
            <a href="https://line.me/ti/g2/aVklWxyLP1RtfstQsslGQOlP4KViuFI7PPucdQ?utm_source=invitation&utm_medium=link_copy&utm_campaign=default" target="_blank" class="col-span-4 btn-link btn-vip text-xs py-2">
                <i class="fas fa-crown mr-2"></i> åŠ å…¥å®åœ‹åœ°æ”¿ç ”ç©¶é™¢ (VIP)
            </a>
        </div>
    </div>

    <div class="px-4 -mt-10 relative z-10">
        
        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6 shadow-sm">
            <div class="flex items-start gap-3">
                <div class="text-2xl">ğŸ”¥</div>
                <div>
                    <h3 class="font-bold text-yellow-800 text-sm mb-1">ç¹¼æ‰¿æˆ¿ç”¢å¿…çœ‹ï¼é€™æ¨£åšæœ€çœç¨…</h3>
                    <a href="https://youtube.com/shorts/3tcLcY8YpHA?si=1k3DkxfRMNCpXGjG" target="_blank" class="text-red-600 text-xs font-bold underline flex items-center">
                        <i class="fab fa-youtube mr-1"></i> é»æ“Šè§€çœ‹æ•™å­¸å½±ç‰‡
                    </a>
                </div>
            </div>
        </div>

        <div class="pro-card">
            <div class="card-header"><i class="fas fa-user-circle"></i> 1. å®¢æˆ¶èƒŒæ™¯è³‡æ–™</div>
            <div class="space-y-3">
                <div class="input-group">
                    <label class="input-label">Q1ï¼šå®¢æˆ¶è·æ¥­åˆ¥</label>
                    <select v-model="occupation" class="nexus-select">
                        <option value="">-- è«‹é¸æ“‡ --</option>
                        <option value="è‡ªç‡Ÿå•†">è‡ªç‡Ÿå•†/ä¼æ¥­ä¸» (å«æ”¤è²©)</option>
                        <option value="æ¥­å‹™æ€§è³ª">é«˜çé‡‘/æ¥­å‹™ (æˆ¿ä»²/ä¿éšª)</option>
                        <option value="å—è–ªéšç´š">ä¸€èˆ¬å—è–ª (ç§‘æŠ€/å‚³ç”¢)</option>
                        <option value="å…¬æ•™äººå“¡">å…¬å‹™äººå“¡/åœ‹ç‡Ÿ/ç™¾å¤§</option>
                        <option value="è‡ªç”±æ¥­">è‡ªç”±å·¥ä½œè€…/é ˜ç¾æ—</option>
                    </select>
                    <div v-if="occupation" class="mt-2 text-xs p-2 bg-gray-50 rounded border border-gray-200 text-gray-600">
                        <span v-if="occupation==='è‡ªç‡Ÿå•†'">ğŸ’¡ çœ‹401/403è¡¨æˆ–æ·¨åˆ©ã€‚ç„¡å ±è¡¨éœ€å‚™é•·æœŸå­˜æ‘ºã€‚</span>
                        <span v-if="occupation==='æ¥­å‹™æ€§è³ª'">ğŸ’¡ ä»¥å¹´åº¦æ‰£ç¹³æ†‘å–®ç‚ºä¸»ã€‚</span>
                        <span v-if="occupation==='å—è–ªéšç´š'||occupation==='å…¬æ•™äººå“¡'">ğŸ’¡ éœ€æä¾›è¿‘ <b class="text-red-500">6å€‹æœˆ</b> è–ªè½‰è­‰æ˜ã€‚</span>
                        <span v-if="occupation==='è‡ªç”±æ¥­'">ğŸ’¡ å»ºè­°æ”¶åˆ°æ¬¾é …å¾Œã€Œå…¨é¡å­˜å…¥ã€å­˜æ‘ºå†æé ˜ï¼Œå»ºç«‹é‡‘æµã€‚</span>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="input-group">
                        <label class="input-label">Q2ï¼šæ‰¶é¤Šäººæ•¸</label>
                        <select v-model.number="dependents" class="nexus-select">
                            <option value="0">0äºº</option>
                            <option value="1">1äºº</option>
                            <option value="2">2äºº</option>
                            <option value="3">3äºº</option>
                            <option value="4">4äºº+</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label class="input-label">Q3ï¼šåä¸‹æˆ¿ç”¢</label>
                        <select v-model.number="houseCount" class="nexus-select">
                            <option value="0">é¦–è³¼ (0æˆ¶)</option>
                            <option value="1">1æˆ¶ (è²·ç¬¬2æˆ¶)</option>
                            <option value="2">2æˆ¶ä»¥ä¸Š</option>
                        </select>
                    </div>
                </div>
                <div v-if="houseCount >= 1" class="text-xs text-red-600 bg-red-50 p-2 rounded mb-2">
                    <i class="fas fa-exclamation-triangle"></i> 
                    {{ houseCount === 1 ? 'å¤®è¡Œç®¡åˆ¶ï¼šç¬¬2æˆ¶ä¸Šé™5æˆï¼Œç„¡å¯¬é™æœŸã€‚' : 'å¤®è¡Œç®¡åˆ¶ï¼šç¬¬3æˆ¶ä¸Šé™3æˆã€‚' }}
                </div>
                <div class="input-group">
                    <label class="input-label">Q4ï¼šå®¢æˆ¶å¹´é½¡</label>
                    <input v-model="age" type="text" class="nexus-input" placeholder="ä¾‹å¦‚ï¼š35æ­²">
                </div>
            </div>
        </div>

        <div class="pro-card">
            <div class="card-header"><i class="fas fa-coins"></i> 2. è²¡å‹™èˆ‡è² å‚µ</div>
            <div class="space-y-3">
                <div class="input-group relative">
                    <label class="input-label">Q5ï¼šæ¯æœˆæ”¶å…¥ (å…ƒ)</label>
                    <input v-model.number="monthlyIncome" type="number" class="nexus-input border-l-4 border-l-blue-500" placeholder="ä¾‹å¦‚ï¼š55000">
                </div>
                <div class="input-group relative">
                    <label class="input-label">Q6ï¼šæ¯æœˆè² å‚µæ”¯å‡º (å…ƒ)</label>
                    <input v-model.number="monthlyDebt" type="number" class="nexus-input border-l-4 border-l-red-500" placeholder="ä¿¡è²¸/è»Šè²¸/å­¸è²¸ç¸½å’Œ">
                </div>

                <div class="debt-notes">
                    <strong>ğŸ“‹ è«‹å‹™å¿…ã€ŒåŠ ç¸½ã€ä»¥ä¸‹æœˆä»˜é‡‘ï¼š</strong>
                    <ul>
                        <li>ä¿¡è²¸ã€è»Šè²¸ã€å­¸è²¸</li>
                        <li>ä¼æ¥­/å‰µæ¥­è²¸æ¬¾ã€åä¸‹åŸæœ‰æˆ¿è²¸</li>
                    </ul>
                    <div class="mt-2 pt-2 border-t border-red-200 text-xs font-bold">
                        ğŸ’¡ ææ—©æ¸…å„Ÿæé†’ï¼š<br>
                        è‹¥è¨ˆç•«åœ¨æœ¬æ¬¡æˆ¿è²¸å‰ã€Œå®Œå…¨æ¸…å„Ÿã€æŸç­†è²¸æ¬¾ï¼Œè©²ç­†é‡‘é¡å¯å¡« 0 (ä¸è¨ˆå…¥)ã€‚
                    </div>
                </div>

                <div class="input-group mt-3">
                    <label class="input-label">è£œå……å‚™è¨» (è³‡ç”¢/è‚¡ç¥¨)</label>
                    <textarea v-model="assets" class="nexus-input h-20" placeholder="ä¾‹å¦‚ï¼šè‚¡ç¥¨ç¾å€¼ç´„200è¬..."></textarea>
                </div>
            </div>
        </div>

        <div class="pro-card border-t-4 border-t-[#C5A065]">
            <div class="card-header justify-center text-lg">ğŸ“Š æœ€é«˜é¡åº¦è©¦ç®—åˆ†æ</div>

            <div class="mb-6">
                <h4 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider">ğŸ¦ ä¸€èˆ¬éŠ€è¡Œ / å¸‚å ´è¡Œæƒ…</h4>
                <div class="grid grid-cols-2 gap-3">
                    <div class="res-box safe">
                        <div class="text-xs font-bold mb-1">âœ… å®åœ‹å»ºè­° (55%)</div>
                        <div class="res-val">{{ safeLoan }}<span class="res-unit">è¬</span></div>
                        <div class="text-[10px] opacity-70 mt-1">ç©©å¥ç¹³æ¬¾</div>
                    </div>
                    <div class="res-box limit">
                        <div class="text-xs font-bold mb-1">ğŸ”¥ å¸‚å ´æ¥µé™ (70%)</div>
                        <div class="res-val">{{ limitLoan }}<span class="res-unit">è¬</span></div>
                        <div class="text-[10px] opacity-70 mt-1">éœ€ä¿¡ç”¨æ¥µä½³</div>
                    </div>
                </div>
                <div class="text-right text-[10px] text-gray-400 mt-2">
                    *è¨ˆç®—åŸºæº–ï¼šæ¯ç™¾è¬å…ƒæœˆä»˜ç´„ $4,000 (30å¹´æœŸ/2.5%)
                </div>

                <details class="img-toggle">
                    <summary>ğŸ“Š æŸ¥çœ‹ã€Œæˆ¿è²¸åˆ©ç‡æœˆä»˜é‡‘å°ç…§è¡¨ã€</summary>
                    <img src="è²¸æ¬¾.jpg" alt="æˆ¿è²¸åˆ©ç‡æœˆä»˜é‡‘å°ç…§è¡¨">
                </details>
            </div>

            <div class="bg-slate-50 p-4 rounded-xl border border-slate-200" :class="{'ring-2 ring-yellow-400': dependents > 0}">
                <h4 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider flex items-center justify-between">
                    <span>ğŸ›ï¸ å…¬è‚¡éŠ€è¡Œ (åš´æ ¼180%)</span>
                    <span v-if="dependents > 0" class="text-xs text-yellow-600 bg-yellow-100 px-2 py-1 rounded-full animate-pulse">
                        âš ï¸ æ‰¶é¤Šæ‰£é™¤ä¸­
                    </span>
                </h4>
                
                <div v-if="dependents > 0" class="mb-4 bg-yellow-50 p-3 rounded border border-yellow-200">
                    <div class="text-xs text-yellow-800 font-bold mb-1">
                        <i class="fas fa-users"></i> æ‰¶é¤Šè¦ªå±¬ç”Ÿæ´»è²»æ‰£é™¤ï¼š
                    </div>
                    <div class="flex justify-between items-end">
                        <span class="text-xs text-gray-600">($15,515 Ã— {{ dependents + 1 }} äºº)</span>
                        <span class="text-lg font-bold text-yellow-700">-${{ ((dependents + 1) * 15515).toLocaleString() }}</span>
                    </div>
                </div>

                <div class="flex justify-between items-center mb-2">
                    <div class="text-xs text-gray-500">
                        æœˆæ”¶ Ã· (è² å‚µ+ç”Ÿæ´»è²»+æˆ¿è²¸) â‰§ 180%
                    </div>
                    <div class="text-right">
                        <div class="text-xs font-bold text-blue-600">æœ€é«˜å¯è²¸</div>
                        <div class="res-val text-blue-700">{{ publicLoan }}<span class="res-unit">è¬</span></div>
                    </div>
                </div>
                <details class="img-toggle" style="background: white;">
                    <summary>ğŸ’° æŸ¥çœ‹ã€Œ114å¹´æ¯æœˆæœ€ä½ç”Ÿæ´»è²»ã€</summary>
                    <img src="1764426349365.jpg" alt="114å¹´æ¯æœˆæœ€ä½ç”Ÿæ´»è²»ä¸€è¦½è¡¨">
                </details>
            </div>
        </div>

        <div class="pro-card border-t-4 border-t-red-500 bg-red-50">
            <div class="card-header text-red-900 border-red-100">
                <i class="fas fa-user-shield text-red-600"></i> 4. ä¿äººéœ€æ±‚è©¦ç®—
            </div>
            
            <div class="grid grid-cols-2 gap-3 mb-4">
                <div class="input-group mb-0">
                    <label class="input-label text-red-900">æƒ³è²¸é‡‘é¡ (è¬)</label>
                    <input v-model.number="targetLoan" type="number" class="nexus-input border-red-300 bg-white" placeholder="ä¾‹å¦‚: 1000">
                </div>
                <div class="input-group mb-0">
                    <label class="input-label text-red-900">ä¿äººç¾æœ‰è² å‚µ</label>
                    <input v-model.number="guarantorDebt" type="number" class="nexus-input border-red-300 bg-white" placeholder="ä¿äººæœˆç¹³">
                    <span class="absolute right-2 bottom-2 text-[10px] text-gray-400">(è¬å…ƒ/æœˆ)</span>
                </div>
            </div>
            
            <div v-if="targetLoan > 0" class="bg-white p-4 rounded-xl border border-red-200 shadow-sm">
                <div v-if="needsGuarantor">
                    <div class="text-sm font-bold text-gray-600 mb-2 text-center flex flex-col items-center">
                        <span><i class="fas fa-exclamation-triangle text-red-500"></i> æ”¶æ”¯æ¯”åé«˜ ( > 55% )</span>
                        <span class="text-xs text-gray-400 font-normal mt-1">å»ºè­°å¾µæä¿äººä»¥å¼·åŒ–æ¡ˆä»¶å®‰å…¨åº¦</span>
                    </div>
                    
                    <div class="g-split">
                        <div class="g-card perfect">
                            <span class="g-title text-green-700">ğŸŸ¢ 50% è¼•é¬†éä»¶</span>
                            <div class="g-val text-green-700">{{ guarantorIncomeSafe }}<span class="text-sm">è¬</span></div>
                            <div class="text-[10px] text-green-600">ä¿äººå»ºè­°æœˆæ”¶</div>
                        </div>
                        <div class="g-card extreme">
                            <span class="g-title text-orange-600">ğŸŸ  60% æ¥µé™æ“ä½œ</span>
                            <div class="g-val text-orange-600">{{ guarantorIncomeLimit }}<span class="text-sm">è¬</span></div>
                            <div class="text-[10px] text-orange-500">ä¿äººæœ€ä½é–€æª»</div>
                        </div>
                    </div>

                    <details class="mt-4 border border-gray-200 rounded text-xs">
                        <summary class="bg-gray-50 p-2 text-gray-500 cursor-pointer">ğŸ“ é»æ­¤æŸ¥çœ‹ï¼šæ”¶æ”¯æ¯”è¨ˆç®—å…¬å¼</summary>
                        <div class="p-3 text-gray-600 leading-relaxed">
                            <p><strong>ğŸ”¢ (æœ¬æ¡ˆæˆ¿è²¸ + å€Ÿæ¬¾äººè² å‚µ + ä¿äººè² å‚µ) Ã· æ”¶æ”¯æ¯” - å€Ÿæ¬¾äººæ”¶å…¥ = ä¿äººæœˆæ”¶</strong></p>
                            <hr class="my-2 border-gray-200">
                            <p><strong>âœ… ç¯„ä¾‹èªªæ˜ (å‡è¨­)ï¼š</strong><br>
                            è²¸1000è¬(æœˆä»˜4è¬)ï¼Œä¿¡è²¸2è¬ã€‚<br>
                            ç¸½æ”¯å‡ºï¼š4 + 2 = 6 è¬<br>
                            <strong>è‹¥ä»¥ 60% è¨ˆç®—ï¼š</strong><br>
                            6è¬ Ã· 0.6 = 10 è¬ (éœ€ç¸½æ”¶å…¥)<br>
                            è‹¥å€Ÿæ¬¾äººæ”¶6è¬ï¼Œ10 - 6 = <strong>4 è¬ (ä¿äººç¼ºå£)</strong></p>
                        </div>
                    </details>

                </div>
                <div v-else class="text-center text-green-600 font-bold py-2">
                    <i class="fas fa-check-circle text-2xl mb-2 block"></i> 
                    æ‚¨çš„æ”¶æ”¯æ¯”å¥åº· (ä½æ–¼55%)ï¼Œ<br>åŸå‰‡ä¸Šä¸éœ€ä¿äººã€‚
                </div>
            </div>
        </div>

        <div class="space-y-2 mt-6">
            <h3 class="text-center font-bold text-gray-500 mb-2">ğŸ“š è³¼å±‹è²¸æ¬¾å¸¸è¦‹ QA</h3>
            <details class="qa-item">
                <summary>ğŸ’° 1. ç¾é‡‘æ”¶å…¥/æ”¤è²© æ€éº¼èªå®šï¼Ÿ</summary>
                <div class="qa-content">éŠ€è¡Œçœ‹é‡ã€Œç©©å®šæ€§ã€ã€‚å»ºè­°å›ºå®šæ™‚é–“å°‡æ”¶å…¥å­˜å…¥å­˜æ‘ºã€‚ç„¡å ±ç¨…è€…éœ€æä¾›é•·æœŸå­˜æ‘ºæˆ–ç‡Ÿæ¥­å ´æ‰€ç…§ç‰‡ä½è­‰ã€‚</div>
            </details>
            <details class="qa-item">
                <summary>ğŸ“‰ 2. æœ‰ä¿¡è²¸ã€è»Šè²¸æœƒå½±éŸ¿å—ï¼Ÿ</summary>
                <div class="qa-content">æœƒåƒæ‰æ”¶æ”¯æ¯”ã€‚è‹¥è² å‚µæ¯”éé«˜ï¼Œå»ºè­°æˆ¿è²¸é€ä»¶å‰ã€Œæå‰ä¸€å€‹æœˆã€æ¸…å„Ÿå®Œç•¢ä¸¦å–å¾—è­‰æ˜ã€‚</div>
            </details>
            <details class="qa-item">
                <summary>ğŸ  3. å¤«å¦»è²·æˆ¿ï¼Œå…ˆç”Ÿç•¶ä¿äººï¼Ÿ</summary>
                <div class="qa-content">è‹¥åƒ…ç‚ºã€Œä¸€èˆ¬ä¿è­‰äººã€ä¸ç®—åä¸‹è² å‚µï¼›è‹¥ç‚ºã€Œå€Ÿæ¬¾äººã€ä¹‹ä¸€ï¼Œæœªä¾†ä»–è‡ªå·±è²·æˆ¿æœƒå—ç¬¬äºŒæˆ¶ç®¡åˆ¶ã€‚</div>
            </details>
        </div>

        <div class="text-center mt-8 text-xs text-gray-400 leading-relaxed">
            æœå‹™å°ˆç·šï¼š06-2582589ï½œå°å—å¸‚åŒ—å€æ–‡è³¢è·¯1080å··11è™Ÿ<br>
            è©¦ç®—åƒ…ä¾›åƒè€ƒï¼Œä»¥éŠ€è¡Œæ‰¹è¦†ç‚ºæº–ã€‚<br>
            Â© 2025 å®åœ‹åœ°æ”¿ | æ˜“ä¸åœ°æ”¿
        </div>
    </div>

    <div class="sticky-footer">
        <button onclick="sendToLine()" class="w-full bg-[#06C755] text-white font-bold py-3 px-6 rounded-full shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-transform">
            <i class="fab fa-line text-xl"></i> è©•ä¼°å®Œæˆï¼å‚³é€çµæœçµ¦å®åœ‹
        </button>
    </div>

</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const occupation = ref("");
            const dependents = ref(0);
            const houseCount = ref(0);
            const age = ref("");
            const monthlyIncome = ref(null);
            const monthlyDebt = ref(null);
            const assets = ref("");
            const targetLoan = ref(null);
            const guarantorDebt = ref(null);

            const monthlyPayPerMillion = 4000;
            const basicLivingCost = 15515;

            // 1. Safe (55%)
            const safeLoan = computed(() => {
                if (!monthlyIncome.value) return 0;
                let val = ((monthlyIncome.value * 0.55) - (monthlyDebt.value || 0));
                return val > 0 ? Math.floor((val / monthlyPayPerMillion) * 100) : 0;
            });

            // 2. Limit (70%)
            const limitLoan = computed(() => {
                if (!monthlyIncome.value) return 0;
                let val = ((monthlyIncome.value * 0.70) - (monthlyDebt.value || 0));
                return val > 0 ? Math.floor((val / monthlyPayPerMillion) * 100) : 0;
            });

            // 3. Public (180%)
            // Formula: Income / (Debt + Living + Loan) >= 1.8
            // => Income / 1.8 >= Debt + Living + Loan
            // => Loan <= (Income/1.8) - Debt - Living
            const publicLoan = computed(() => {
                if (!monthlyIncome.value) return 0;
                // Important: Living cost includes borrower + dependents
                let totalLiving = basicLivingCost * (1 + dependents.value);
                let val = (monthlyIncome.value / 1.8) - (monthlyDebt.value || 0) - totalLiving;
                return val > 0 ? Math.floor((val / monthlyPayPerMillion) * 100) : 0;
            });

            // 4. Guarantor Logic
            // Logic: (TargetLoanMonthlyPay + MonthlyDebt) / Income > 0.55
            const needsGuarantor = computed(() => {
                if (!targetLoan.value || !monthlyIncome.value) return false;
                
                // Convert Wan to Yuan for calculation
                const loanWan = targetLoan.value;
                const estPay = loanWan * monthlyPayPerMillion / 10000; // e.g. 1000 * 4000 / 10000 = 400 (Wait! 4000 is Yen)
                // Correct: 1000 Wan = 10 Million. 10 * 4000 = 40000.
                
                // Let's use Wan units consistently
                const estPayWan = (loanWan * monthlyPayPerMillion) / 10000; // 1000 * 4000 = 4000000 / 10000 = 400? No.
                // monthlyPayPerMillion is 4000 Yuan.
                // 1000 Wan Loan = 10 Million Loan.
                // Payment = 10 * 4000 = 40000 Yuan = 4 Wan.
                
                const payWan = (targetLoan.value / 100) * (monthlyPayPerMillion / 10000); 
                // e.g. 1000/100 = 10 units. 4000/10000 = 0.4 Wan. 10 * 0.4 = 4 Wan. Correct.
                
                const debtWan = (monthlyDebt.value || 0) / 10000;
                const incomeWan = (monthlyIncome.value || 0) / 10000;
                
                const totalObligation = payWan + debtWan;
                
                // Trigger if Total Debt > Income * 0.55 (Safety Line)
                return totalObligation > (incomeWan * 0.55);
            });

            const calculateGuarantorNeed = (ratio) => {
                if (!targetLoan.value || !monthlyIncome.value) return 0;
                
                const payWan = (targetLoan.value / 100) * (monthlyPayPerMillion / 10000);
                const debtWan = (monthlyDebt.value || 0) / 10000;
                const gDebtWan = guarantorDebt.value || 0; // Input is Wan
                
                const totalDebtWan = payWan + debtWan + gDebtWan;
                const incomeWan = (monthlyIncome.value || 0) / 10000;
                
                // Formula: (TotalDebt / Ratio) - BorrowerIncome
                const incomeNeededWan = (totalDebtWan / ratio) - incomeWan;
                
                return incomeNeededWan > 0 ? (incomeNeededWan).toFixed(1) : 0;
            };

            const guarantorIncomeSafe = computed(() => calculateGuarantorNeed(0.5)); // 50% DBR
            const guarantorIncomeLimit = computed(() => calculateGuarantorNeed(0.6)); // 60% DBR

            window.sendToLine = () => {
                let text = `ã€æˆ¿è²¸é¡åº¦å…¨æ–¹ä½è©•ä¼°ã€‘\n(å®åœ‹åœ°æ”¿/æ˜“ä¸åœ°æ”¿)\n\n`;
                text += `Q1è·æ¥­ï¼š${occupation.value || 'æœªå¡«'}\n`;
                text += `Q2æ‰¶é¤Šï¼š${dependents.value}äºº\n`;
                text += `Q3æˆ¿ç”¢ï¼š${houseCount.value === 0 ? 'é¦–è³¼' : houseCount.value + 'æˆ¶'}\n`;
                text += `Q4å¹´é½¡ï¼š${age.value || 'æœªå¡«'}\n`;
                text += `Q5æœˆæ”¶ï¼š${monthlyIncome.value || 0}\n`;
                text += `Q6æœˆè² å‚µï¼š${monthlyDebt.value || 0}\n`;
                text += `è³‡ç”¢å‚™è¨»ï¼š${assets.value || 'ç„¡'}\n\n`;
                text += `ğŸ“Šã€æœ€é«˜é¡åº¦è©¦ç®—ã€‘\n`;
                text += `âœ…å®åœ‹å»ºè­°(55%)ï¼š${safeLoan.value}è¬\n`;
                text += `ğŸ”¥å¸‚å ´æ¥µé™(70%)ï¼š${limitLoan.value}è¬\n`;
                text += `ğŸ›ï¸å…¬è‚¡å°éŠ€(åš´æ ¼)ï¼š${publicLoan.value}è¬\n`;
                
                if (targetLoan.value) {
                    text += `\nğŸ›¡ï¸ã€ä¿äººéœ€æ±‚è©¦ç®—ã€‘\n`;
                    text += `æƒ³è²¸é‡‘é¡ï¼š${targetLoan.value}è¬\n`;
                    if (needsGuarantor.value) {
                        text += `ğŸ‘‰ å»ºè­°ä¿äººæœˆæ”¶(50%æ°´æº–)ï¼š${guarantorIncomeSafe.value}è¬\n`;
                        text += `ğŸ‘‰ æœ€ä½é–€æª»(60%æ¥µé™)ï¼š${guarantorIncomeLimit.value}è¬\n`;
                    } else {
                        text += `ğŸ‘‰ è²¡å‹™å¥åº·ï¼ŒåŸå‰‡ä¸Šä¸éœ€ä¿äºº\n`;
                    }
                }

                const lineID = "@604gpqef";
                window.location.href = `https://line.me/R/oaMessage/${lineID}/?text=${encodeURIComponent(text)}`;
            };

            return {
                occupation, dependents, houseCount, age,
                monthlyIncome, monthlyDebt, assets,
                targetLoan, guarantorDebt,
                safeLoan, limitLoan, publicLoan,
                needsGuarantor, guarantorIncomeSafe, guarantorIncomeLimit
            };
        }
    }).mount('#app');
</script>
</body>
</html>